define(["jquery"],function(i){var t=function(){function t(i){this.start=0,this.picsPerRequest=3,this.$picsWrap=i,this.$btn=i.siblings(".btn-load"),this.$hiddenPic=i.find(".pic.hidden"),this.picSrcStorage=["radiohead1.jpg","radiohead2.jpg","radiohead3.jpg","radiohead4.jpg","radiohead5.jpg","radiohead6.jpg","radiohead7.jpg","radiohead8.jpg","radiohead9.jpg","radiohead10.jpg","radiohead11.jpg","radiohead12.jpg"],this.colLength=Math.floor(this.$picsWrap.width()/this.$hiddenPic.outerWidth(!0)),this.colHeightArr=[];for(var t=0;t<this.colLength;t++)this.colHeightArr[t]=0;this.getPicSrcs(),this.bindBtnClick()}return t.prototype.getPicSrcs=function(){var t=this.picSrcStorage.slice(this.start*this.picsPerRequest,(this.start+1)*this.picsPerRequest);if(!(t.length<=0)){var r=this;i.each(t,function(i,t){var e=r.createPicNode(t);e.find("img").on("load",function(){e.appendTo(r.$picsWrap),r.renderWaterfall(e)})}),this.start++}},t.prototype.bindBtnClick=function(){var i=this;this.$btn.on("click",function(){i.getPicSrcs();var t=i.picSrcStorage.slice(i.start*i.picsPerRequest,(i.start+1)*i.picsPerRequest);t.length<=0&&i.$btn.css("display","none")})},t.prototype.createPicNode=function(t){var r=['<div class="pic"><img src="img/lazyload/',t,'"></div>'].join(""),e=i(r);return e},t.prototype.renderWaterfall=function(i){var t=Math.min.apply(null,this.colHeightArr),r=this.colHeightArr.indexOf(t);i.css({top:t+"px",left:i.outerWidth(!0)*r+"px"}),this.colHeightArr[r]+=i.outerHeight(!0),this.$picsWrap.height(Math.max.apply(null,this.colHeightArr))},{init:function(i){new t(i)}}}();return t});